{
  "taskGroups": [
    {
      "taskSpec": {
        "runnables": [
          {
            "container": {
              "imageUri": "gcr.io/disputo/open-introspection-sweep:latest",
              "commands": [
                "uv", "run", "python", "experiments/04_cloud_sweep/sweep.py",
                "--model", "3b",
                "--trials", "40",
                "--experiment-id", "2026-01-23-layer-strength-sweep"
              ]
            },
            "environment": {
              "secretVariables": {
                "OPENAI_API_KEY": "projects/disputo/secrets/openai-api-key/versions/latest"
              },
              "variables": {
                "GCS_BUCKET": "open-introspection-sweeps"
              }
            }
          }
        ],
        "computeResource": {
          "cpuMilli": 4000,
          "memoryMib": 16384
        },
        "maxRunDuration": "14400s"
      },
      "taskCount": 4,
      "parallelism": 4
    }
  ],
  "allocationPolicy": {
    "instances": [
      {
        "installGpuDrivers": true,
        "policy": {
          "machineType": "g2-standard-8",
          "accelerators": [
            {
              "type": "nvidia-l4",
              "count": 1
            }
          ],
          "provisioningModel": "SPOT"
        }
      }
    ],
    "location": {
      "allowedLocations": ["zones/us-central1-a", "zones/us-central1-b"]
    },
    "serviceAccount": {
      "email": "default"
    }
  },
  "logsPolicy": {
    "destination": "CLOUD_LOGGING"
  }
}
